{% extends 'core/base.html' %}
{% load static %}

{% block content %}
<style>
    /* Hero Section Orbital Animation Styles */
    .hero-visuals {
        position: relative;
        width: 450px;
        height: 450px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .orbit-container {
        position: absolute;
        width: 100%;
        height: 100%;
        transform-origin: center;
        z-index: 4;
    }

    .orbit-plane-icon {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 40px;
        color: white;
        background-color: transparent;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        animation: orbit-plane 15s linear infinite;
        transform-origin: 50% 50%;
    }

    @keyframes orbit-plane {
        0% {
            transform: translate(-50%, -50%) rotate(0deg) translateY(-225px);
        }

        25% {
            transform: translate(-50%, -50%) rotate(90deg) translateY(-225px);
        }

        50% {
            transform: translate(-50%, -50%) rotate(180deg) translateY(-225px);
        }

        75% {
            transform: translate(-50%, -50%) rotate(270deg) translateY(-225px);
        }

        100% {
            transform: translate(-50%, -50%) rotate(360deg) translateY(-225px);
        }
    }

    @media (prefers-reduced-motion: reduce) {

        .orbit-container,
        .orbit-plane-icon {
            animation: none;
        }
    }

    /* Student Journey Styles - Redesign */
    .journey-wrapper {
        position: relative;
        padding: 40px 0;
    }

    .journey-steps {
        display: flex;
        justify-content: space-between;
        position: relative;
        max-width: 1100px;
        margin: 0 auto;
    }

    /* Connecting Line */
    .journey-steps::before {
        content: '';
        position: absolute;
        top: 40px;
        left: 50px;
        right: 50px;
        height: 2px;
        background: #E2E8F0;
        z-index: 0;
    }

    .journey-step-item {
        position: relative;
        z-index: 1;
        width: 18%;
        /* 5 steps ~ 20% each */
        text-align: center;
        transition: transform 0.3s ease;
    }

    .journey-step-item:hover {
        transform: translateY(-10px);
    }

    .journey-icon-box {
        width: 80px;
        height: 80px;
        background: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 24px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        border: 4px solid #E0F2FE;
        position: relative;
        transition: all 0.3s ease;
    }

    .journey-step-item:hover .journey-icon-box {
        background: var(--primary);
        color: white;
        border-color: rgba(255, 255, 255, 0.2);
        box-shadow: 0 15px 40px rgba(37, 99, 235, 0.3);
    }

    .journey-icon-box i {
        font-size: 28px;
        color: var(--primary);
        transition: color 0.3s ease;
    }

    .journey-step-item:hover .journey-icon-box i {
        color: white;
    }

    .step-badge {
        position: absolute;
        top: -5px;
        right: -5px;
        width: 28px;
        height: 28px;
        background: var(--dark);
        color: white;
        border-radius: 50%;
        font-size: 12px;
        font-weight: 700;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 3px solid white;
    }

    .journey-title {
        font-size: 16px;
        font-weight: 700;
        color: var(--dark);
        margin-bottom: 8px;
        padding: 0 5px;
    }

    .journey-desc {
        font-size: 13px;
        color: var(--gray);
        line-height: 1.5;
        padding: 0 5px;
    }

    @media (max-width: 991px) {
        .journey-steps {
            flex-direction: column;
            gap: 40px;
            padding-left: 30px;
        }

        .journey-steps::before {
            top: 0;
            bottom: 0;
            left: 39px;
            /* Align with icon center */
            right: auto;
            width: 2px;
            height: auto;
        }

        .journey-step-item {
            width: 100%;
            display: grid;
            grid-template-columns: 80px 1fr;
            grid-template-rows: auto auto;
            gap: 10px 20px;
            /* row-gap col-gap */
            text-align: left;
            align-items: start;
        }

        .journey-step-item:hover {
            transform: translateX(10px);
        }

        .journey-icon-box {
            margin: 0;
            grid-row: 1 / -1;
            /* Span all rows */
            /* Reset auto margin */
            flex-shrink: 0;
        }

        .journey-title {
            align-self: end;
            /* Align to bottom of icon top half */
            margin-bottom: 0;
            line-height: 1.2;
        }

        .journey-desc {
            grid-column: 2;
            padding: 0;
            /* Remove padding if any */
        }
    }
</style>
<!-- Hero Section -->
<section class="hero-section">
    <!-- Background Graphic -->
    <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 0; overflow: hidden;">
        <div
            style="position: absolute; width: 100%; height: 100%; background-image: radial-gradient(rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 30px 30px; opacity: 0.4;">
        </div>
    </div>

    <div class="container" style="position: relative; z-index: 2; height: 100%;">
        <div class="hero-grid">
            <div class="hero-text-content">
                <div class="fade-in-section is-visible">
                    <div
                        style="display: inline-block; padding: 8px 20px; background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); color: #FFFFFF; border-radius: 50px; font-size: 13px; font-weight: 600; margin-bottom: 28px; border: 1px solid rgba(255, 255, 255, 0.3);">
                        <i class="fa-solid fa-plane" style="margin-right: 8px;"></i>
                        Verified Education Consultancy in Nepal
                    </div>
                    {% if hero %}
                    <h1 class="hero-title"
                        style="font-weight: 800; margin-bottom: 24px; letter-spacing: -2px; text-shadow: 0 10px 30px rgba(0,0,0,0.15);">
                        <span style="color: var(--white);">{{ hero.title_part1 }}</span> <br />
                        <span style="color: #E0F2FE;">{{ hero.title_part2 }}</span>
                    </h1>
                    <p class="hero-subtitle">
                        {{ hero.subtitle }}
                    </p>
                    {% endif %}

                    <div class="hero-btns">
                        <a href="{% url 'contact' %}" class="btn-primary"
                            style="padding: 16px 36px; font-size: 15px; background: var(--white); color: var(--primary); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);">
                            Free Consultation <i class="fa-solid fa-arrow-right" style="margin-left: 8px;"></i>
                        </a>
                        <a href="{% url 'success_stories' %}" class="btn-primary"
                            style="padding: 16px 36px; font-size: 15px; background: transparent; border: 2px solid rgba(255,255,255,0.3); color: #FFFFFF; box-shadow: none;">
                            Success Stories
                        </a>
                    </div>
                </div>
            </div>

            <div class="hero-visuals">
                <div class="visuals-content-wrapper"
                    style="position: relative; width: 450px; height: 450px; display: flex; align-items: center; justify-content: center;">
                    <div class="pulse-btn"
                        style="position: absolute; width: 100%; height: 100%; border-radius: 50%; border: 1px solid rgba(255, 255, 255, 0.1); z-index: 0;">
                    </div>
                    <div class="floating-h"
                        style="position: absolute; width: 80%; height: 80%; border-radius: 50%; border: 1px dashed rgba(255,255,255,0.2); z-index: 1; animation-duration: 20s;">
                    </div>
                    <div
                        style="position: absolute; width: 110%; height: 60%; border-radius: 50%; border: 1px solid rgba(255,255,255,0.1); z-index: 1; transform: rotate(-30deg);">
                    </div>

                    <div class="orbit-container">
                        <div class="orbit-plane-icon">
                            <i class="fa-solid fa-plane"></i>
                        </div>
                    </div>

                    <div class="floating"
                        style="width: 220px; height: 220px; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(20px); border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 20px 50px rgba(0,0,0,0.1), inset 0 0 20px rgba(255,255,255,0.5); position: relative; z-index: 5; border: 1px solid rgba(255,255,255,0.4);">
                        <div style="font-size: 80px; color: white; opacity: 0.9;">
                            <i class="fa-solid fa-globe"></i>
                        </div>
                    </div>

                    <!-- Floating Stats Cards -->
                    <div class="floating-delayed" style="position: absolute; top: 10%; right: 5%; z-index: 6;">
                        <div
                            style="background: rgba(255,255,255,0.9); padding: 15px; border-radius: 20px; display: flex; align-items: center; gap: 10px; box-shadow: 0 15px 35px rgba(0,0,0,0.15);">
                            <div
                                style="width: 36px; height: 36px; background: var(--primary); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white;">
                                <i class="fa-solid fa-calendar-check"></i>
                            </div>
                            <div>
                                <div style="font-size: 10px; color: var(--gray);">Founded</div>
                                <div style="font-size: 13px; font-weight: 700; color: var(--dark);">2008</div>
                            </div>
                        </div>
                    </div>

                    <div class="floating-delayed" style="position: absolute; bottom: 15%; left: 5%; z-index: 6;">
                        <div
                            style="background: rgba(255,255,255,0.9); padding: 15px; border-radius: 20px; display: flex; align-items: center; gap: 10px; box-shadow: 0 15px 35px rgba(0,0,0,0.15);">
                            <div
                                style="width: 36px; height: 36px; background: var(--primary); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white;">
                                <i class="fa-solid fa-award"></i>
                            </div>
                            <div>
                                <div style="font-size: 10px; color: var(--gray);">Experience</div>
                                <div style="font-size: 13px; font-weight: 700; color: var(--dark);">18+ Years</div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Why Choose Us / Features -->
<section style="padding: 100px 0; background: white;">
    <div class="container">
        <div style="text-align: center; margin-bottom: 60px;">
            <div class="fade-in-section is-visible">
                <h2 style="font-size: 36px; font-weight: 700; margin-bottom: 15px; color: var(--dark);">Why Choose GSREC
                    Nepal?</h2>
                <p style="color: var(--gray); font-size: 16px; max-width: 600px; margin: 0 auto;">We are not just
                    consultants; we are your career architects. Trusted by students across Nepal.</p>
            </div>
        </div>
        <div class="grid-responsive"
            style="gap: 40px; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); justify-content: center;">
            {% for feature in features %}
            <div class="feature-card fade-in-section is-visible"
                style="padding: 30px; display: block; text-decoration: none; color: inherit;">
                <div
                    style="width: 60px; height: 60px; border-radius: 16px; background: rgba(37, 99, 235, 0.1); display: flex; align-items: center; justify-content: center; margin-bottom: 24px; color: var(--primary); font-size: 24px;">
                    <i class="fa-solid {{ feature.icon_class }}"></i>
                </div>
                <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px; color: var(--dark);">
                    {{feature.title}}</h3>
                <p style="color: var(--gray); font-size: 14px; line-height: 1.6;">{{ feature.text }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
    <!-- Stats Section -->
    {% if stats %}
    <div style="position: relative; z-index: 10; margin-top: 60px; margin-bottom: 60px; padding: 0 24px;">
        <div class="container">
            <div
                style="background: var(--primary); border-radius: 50px; padding: 30px 50px; color: white; box-shadow: 0 20px 50px -10px rgba(37, 99, 235, 0.5); display: flex; justify-content: space-around; flex-wrap: wrap; gap: 30px; text-align: center; max-width: 1100px; margin: 0 auto; border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(10px);">
                {% for stat in stats %}
                <div style="display: flex; flex-direction: column; align-items: center;">
                    <div style="font-size: 32px; font-weight: 800; margin-bottom: 4px; line-height: 1;">{{ stat.number}}
                    </div>
                    <div
                        style="font-size: 13px; opacity: 0.9; text-transform: uppercase; letter-spacing: 0.5px; font-weight: 600;">
                        {{ stat.label }}</div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}
</section>

<!-- Popular Destinations -->
<section class="content-section">
    <div class="container">
        <h2 class="section-title">Popular Destinations</h2>
        <p class="section-subtitle">Choose from the world's top study destinations. We guide you to the perfect country
            for your career goals.</p>

        <div class="grid-responsive">
            {% for country in countries|slice:":3" %}
            <a href="{% url 'destination_detail' country.slug %}" class="feature-card">
                <div style="height: 200px; overflow: hidden; position: relative;">
                    {% if country.background_image %}
                    <img src="{{ country.background_image.url }}" alt="{{ country.name }}"
                        style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s;">
                    {% else %}
                    <div style="width: 100%; height: 100%; background-color: #eee;"></div>
                    {% endif %}
                    <div
                        style="position: absolute; top: 15px; right: 15px; background: #FFFFFF; border-radius: 12px; padding: 8px 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                        <span style="font-size: 24px;">{{ country.flag_emoji }}</span>
                    </div>
                </div>
                <div style="padding: 24px; flex: 1;">
                    <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px; color: var(--dark);">
                        {{country.name }}</h3>
                    <p style="color: var(--gray); font-size: 14px; line-height: 1.6; margin-bottom: 20px;">
                        {{ country.intro|truncatechars:100 }}
                    </p>
                    <div
                        style="color: var(--primary); font-weight: 600; font-size: 14px; margin-top: auto; display: flex; align-items: center; gap: 6px;">
                        Read More <i class="fa-solid fa-arrow-right"></i>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>

        <div style="text-align: center; margin-top: 50px;">
            <a href="{% url 'destination_list' %}" class="btn-primary" style="padding: 14px 30px;">View All
                Countries</a>
        </div>
    </div>
</section>

<!-- Student Journey Section -->
<section class="content-section" style="background: white; overflow: hidden; padding-bottom: 80px;">
    <div class="container">
        <div style="text-align: center; margin-bottom: 60px;">
            <h2 class="section-title">Your Journey to Success</h2>
            <p class="section-subtitle">We guide you through every step of your study abroad dream.</p>
        </div>

        <div class="journey-wrapper">
            <div class="journey-steps">
                <!-- Step 1 -->
                <div class="journey-step-item fade-in-section is-visible">
                    <div class="journey-icon-box">
                        <span class="step-badge">1</span>
                        <i class="fa-solid fa-comments"></i>
                    </div>
                    <div class="journey-title">Counseling</div>
                    <div class="journey-desc">Expert guidance to identify your goals and match you with the right
                        course.</div>
                </div>

                <!-- Step 2 -->
                <div class="journey-step-item fade-in-section is-visible">
                    <div class="journey-icon-box">
                        <span class="step-badge">2</span>
                        <i class="fa-solid fa-university"></i>
                    </div>
                    <div class="journey-title">University Selection</div>
                    <div class="journey-desc">Choose from 500+ top universities that align with your aspirations.</div>
                </div>

                <!-- Step 3 -->
                <div class="journey-step-item fade-in-section is-visible">
                    <div class="journey-icon-box">
                        <span class="step-badge">3</span>
                        <i class="fa-solid fa-file-contract"></i>
                    </div>
                    <div class="journey-title">Documentation</div>
                    <div class="journey-desc">Full assistance with applications, SOPs, and financial documents.</div>
                </div>

                <!-- Step 4 -->
                <div class="journey-step-item fade-in-section is-visible">
                    <div class="journey-icon-box">
                        <span class="step-badge">4</span>
                        <i class="fa-brands fa-cc-visa"></i>
                    </div>
                    <div class="journey-title">Visa Success</div>
                    <div class="journey-desc">Rigorous interview prep and visa lodging for high success rates.</div>
                </div>

                <!-- Step 5 -->
                <div class="journey-step-item fade-in-section is-visible">
                    <div class="journey-icon-box">
                        <span class="step-badge">5</span>
                        <i class="fa-solid fa-plane-departure"></i>
                    </div>
                    <div class="journey-title">Fly Abroad</div>
                    <div class="journey-desc">Pre-departure support to ensure you settle in smoothly.</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Services Section -->
<section class="content-section" style="background-color: white;">
    <div class="container">
        <h2 class="section-title">Our Services</h2>
        <p class="section-subtitle">Comprehensive guidance at every step of your study abroad journey.</p>

        <div class="grid-responsive">
            {% for service in services|slice:":3" %}
            <a href="{% url 'service_detail' service.slug %}" class="feature-card"
                style="padding: 30px; display: block; text-decoration: none; color: inherit;">
                <div
                    style="width: 60px; height: 60px; border-radius: 16px; background: rgba(37, 99, 235, 0.1); display: flex; align-items: center; justify-content: center; margin-bottom: 24px; color: var(--primary); font-size: 24px;">
                    <i class="fa-solid {{ service.icon_class }}"></i>
                </div>
                <h3 style="font-size: 18px; font-weight: 700; margin-bottom: 12px; color: var(--dark);">
                    {{service.title}}</h3>
                <p style="color: var(--gray); font-size: 14px; line-height: 1.6;">{{ service.intro|truncatechars:120 }}
                </p>
            </a>
            {% endfor %}
        </div>

        <div style="text-align: center; margin-top: 50px;">
            <a href="{% url 'service_list' %}" class="btn-primary" style="padding: 14px 30px;">View All
                Services</a>
        </div>
    </div>
</section>

<!-- Testimonials -->
<section class="content-section">
    <div class="container">
        <h2 class="section-title">Student Stories</h2>
        <p class="section-subtitle">Hear from students who made their dreams come true with GSREC.</p>

        <div class="grid-responsive">
            {% for testimonial in testimonials|slice:":3" %}
            <div
                style="padding: 40px 30px; background: white; border-radius: 20px; border: 2px solid #e2e8f0; box-shadow: 0 4px 12px rgba(0,0,0,0.06); height: 100%; display: flex; flex-direction: column; align-items: center;">
                {% if testimonial.image %}
                <div style="margin-top: 10px; margin-bottom: 25px; width: 100%; max-width: 320px;">
                    <img src="{{ testimonial.image.url }}" alt="{{ testimonial.name }}"
                        style="width: 100%; aspect-ratio: 1/1; border-radius: 20px; object-fit: cover; border: 4px solid white; box-shadow: 0 10px 25px rgba(0,0,0,0.1);">
                </div>
                {% else %}
                <div style="margin-top: 10px; margin-bottom: 25px; width: 100%; max-width: 320px;">
                    <div
                        style="width: 100%; aspect-ratio: 1/1; border-radius: 20px; background-color: #eee; margin: 0 auto; border: 4px solid white; box-shadow: 0 10px 25px rgba(0,0,0,0.1);">
                    </div>
                </div>
                {% endif %}

                <div style="margin-bottom: 20px; text-align: center;">
                    <h3 style="font-weight: 800; font-size: 20px; color: var(--dark); margin-bottom: 5px;">
                        {{testimonial.name }}
                    </h3>
                    <div style="font-size: 14px; color: var(--primary); font-weight: 600;">{{ testimonial.university }}
                    </div>
                </div>

                <p
                    style="font-style: italic; color: var(--gray); font-size: 16px; line-height: 1.8; margin-bottom: 0; text-align: center;">
                    "{{ testimonial.quote }}"
                </p>
            </div>
            {% endfor %}
        </div>

        <div style="text-align: center; margin-top: 50px;">
            <a href="{% url 'success_stories' %}" class="btn-primary" style="padding: 14px 30px;">View All
                Testimonials</a>
        </div>
    </div>
</section>

<section class="content-section" style="background-color: var(--primary); color: white; text-align: center;">
    <div class="container">
        <h2 style="font-size: 36px; font-weight: 800; margin-bottom: 24px; color: white;">Ready to start your journey?
        </h2>
        <p style="max-width: 600px; margin: 0 auto 40px; font-size: 18px; color: rgba(255,255,255,0.9);">
            Book a free counseling session today.
        </p>
        <a href="{% url 'contact' %}" class="btn-primary" style="background: white; color: var(--primary);">
            Contact Us Now
        </a>
    </div>
</section>
{% endblock %}
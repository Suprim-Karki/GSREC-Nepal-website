{% extends 'core/base.html' %}
{% load static %}

{% block title %}{{ country.name }} | GSREC{% endblock %}

{% block content %}
<section
    style="height: 50vh; position: relative; display: flex; align-items: center; justify-content: center; color: white; text-align: center; background: linear-gradient(135deg, var(--primary) 0%, var(--dark) 100%);">
    <div style="position: relative; z-index: 2; padding: 0 20px;">
        <div
            style="width: 80px; height: 80px; background: rgba(255,255,255,0.1); border-radius: 24px; display: inline-flex; align-items: center; justify-content: center; font-size: 48px; color: white; margin-bottom: 20px;">
            {{ country.flag_emoji }}
        </div>
        <h1
            style="font-size: 56px; font-weight: 800; text-shadow: 0 10px 30px rgba(0,0,0,0.2); letter-spacing: -2px; color: #FFFFFF;">
            Study in {{ country.name }}</h1>
        </p>
    </div>
</section>

<section class="content-section">
    <div class="container">
        <div class="split-layout">
            <div>
                <h2 class="section-title" style="text-align: left;">Overview</h2>
                <p style="font-size: 16px; margin-bottom: 30px; line-height: 1.8;">
                    {{ country.intro }}
                </p>

                <h3 style="font-size: 24px; font-weight: 700; margin-bottom: 20px;">Why Study in {{ country.name }}?
                </h3>
                <ul style="margin-bottom: 40px;">
                    {% for fact in country.facts %}
                    <li style="margin-bottom: 12px; display: flex; gap: 10px; align-items: center;">
                        <i class="fa-solid fa-check-circle" style="color: var(--primary);"></i> {{ fact }}
                    </li>
                    {% endfor %}
                </ul>

                <h3 style="font-size: 24px; font-weight: 700; margin-bottom: 20px;">Institutions</h3>
                <ul style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    {% for inst in country.institutions.all %}
                    <li
                        style="padding: 10px; background: #f8fafc; border-radius: 8px; border-left: 3px solid var(--primary);">
                        {% if inst.url %}
                        <a href="{{ inst.url }}" target="_blank" class="institution-link">{{ inst.name }}</a>
                        {% else %}
                        <span class="institution-name">{{ inst.name }}</span>
                        {% endif %}
                    </li>
                    {% empty %}
                    <!-- Fallback to old JSON list if no new models entered yet, or just empty -->
                    {% for uni in country.universities %}
                    <li
                        style="padding: 10px; background: #f8fafc; border-radius: 8px; border-left: 3px solid var(--primary);">
                        {{ uni }}</li>
                    {% endfor %}
                    {% endfor %}
                </ul>
            </div>

            <!-- Sidebar Form with Sticky Position -->
            <div style="position: sticky; top: 120px; height: fit-content;">
                {% include 'core/includes/inquiry_form.html' with form_title="Quick Inquiry" %}
            </div>
        </div>
    </div>
</section>
{% endblock %}
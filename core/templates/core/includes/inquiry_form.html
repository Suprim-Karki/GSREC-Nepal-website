<div class="contact-form-panel"
    style="padding: 30px; background: white; border-radius: 20px; box-shadow: 0 15px 40px rgba(0,0,0,0.1);">

    {% if submitted %}
    <!-- Success Message -->
    <div style="text-align: center; padding: 40px 0;">
        <div
            style="width: 60px; height: 60px; background: #ECFDF5; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
            <i class="fa-solid fa-check" style="font-size: 24px; color: #10B981;"></i>
        </div>
        <h3 style="font-size: 24px; font-weight: 700; margin-bottom: 10px; color: var(--dark);">
            Message Sent!
        </h3>
        <p style="color: var(--gray);">We will get back to you shortly.</p>
        <a href="{{ request.path }}" class="btn-primary" style="margin-top: 20px; display: inline-block;">
            Send Another
        </a>
    </div>

    {% else %}
    <!-- Form -->
    <form method="POST" action="">
        {% csrf_token %}
        <style>
            .form-input-styled {
                width: 100%;
                padding: 12px;
                border: 1px solid #e2e8f0;
                border-radius: 8px;
                height: 48px;
                /* Consistent height */
                box-sizing: border-box;
                font-family: inherit;
                font-size: 14px;
            }

            .form-label {
                display: block;
                font-size: 14px;
                font-weight: 600;
                color: var(--dark);
                margin-bottom: 5px;
            }
        </style>

        {% if not hide_title %}
        <h3 style="font-size: 24px; font-weight: 700; margin-bottom: 20px; color: var(--primary);">
            {{ form_title|default:"Quick Inquiry" }}
        </h3>
        {% endif %}

        <!-- Name -->
        <div style="margin-bottom: 15px;">
            <label class="form-label">Full Name <span style="color: #EF4444;">*</span></label>
            <input type="text" name="name" required class="form-input-styled" placeholder="Full Name">
        </div>

        <!-- Phone -->
        <div style="margin-bottom: 15px;">
            <label class="form-label">Phone Number <span style="color: #EF4444;">*</span></label>
            <input type="tel" name="phone" required class="form-input-styled" placeholder="Phone Number">
        </div>

        <!-- Email -->
        <div style="margin-bottom: 15px;">
            <label class="form-label">Email Address</label>
            <input type="email" name="email" class="form-input-styled" placeholder="Email Address (Optional)">
        </div>

        <!-- Country Select -->
        <div style="margin-bottom: 15px;">
            <label class="form-label">Interested Country</label>
            <select name="country" class="form-input-styled" style="color: #475569;">
                <option value="" {% if not country %}selected{% endif %}></option>
                {% for c in global_countries %}
                {% if country and country.slug == c.slug %}
                <option value="{{ c.slug }}" selected>{{ c.name }}</option>
                {% else %}
                <option value="{{ c.slug }}">{{ c.name }}</option>
                {% endif %}
                {% endfor %}
            </select>
        </div>

        <!-- Test Prep Select -->
        <div style="margin-bottom: 15px;">
            <label class="form-label">Test Preparation</label>
            <select name="test_prep" class="form-input-styled" style="color: #475569;">
                <option value="" {% if not test_prep %}selected{% endif %}></option>
                {% for tp in global_test_preps %}
                {% if test_prep and test_prep.slug == tp.slug %}
                <option value="{{ tp.slug }}" selected>{{ tp.name }}</option>
                {% else %}
                <option value="{{ tp.slug }}">{{ tp.name }}</option>
                {% endif %}
                {% endfor %}
            </select>
        </div>

        <!-- Message -->
        <div style="margin-bottom: 20px;">
            <label class="form-label">Additional Message</label>
            <textarea name="message" class="form-input-styled"
                style="height: auto; min-height: 100px; resize: vertical;"
                placeholder="Tell us about your requirements..."></textarea>
        </div>

        <!-- Submit -->
        <button type="submit" class="btn-primary"
            style="width: 100%; justify-content: center; font-size: 16px; padding: 14px;">
            Submit Inquiry
        </button>
    </form>
    {% endif %}
</div>